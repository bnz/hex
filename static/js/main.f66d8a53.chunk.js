(this.webpackJsonphex=this.webpackJsonphex||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports={button:"Button_button__3tE03",withIcon:"Button_withIcon__3mxLj",buttonContained:"Button_buttonContained__1_qjk",main:"Button_main__xrucu Button_button__3tE03 Button_buttonContained__1_qjk",text:"Button_text__1-Elw Button_button__3tE03",restart:"Button_restart__18J1J Button_button__3tE03 Button_buttonContained__1_qjk Button_withIcon__3mxLj",rotate:"Button_rotate__36yKG Button_button__3tE03 Button_buttonContained__1_qjk Button_withIcon__3mxLj"}},,function(t,e,n){t.exports={root:"Dialog_root__NRShG",backdrop:"Dialog_backdrop__1sYxI",header:"Dialog_header__1azbN",content:"Dialog_content__2meVV",closeButton:"Dialog_closeButton__1r6o3 Button_button__3tE03",footer:"Dialog_footer__YAeCI"}},,,,function(t,e,n){t.exports={drawer:"Drawer_drawer__1HalH",hidden:"Drawer_hidden__2OHcw",backdrop:"Drawer_backdrop__gWGnm",content:"Drawer_content__1bryE",box:"Drawer_box__3GC_l",actions:"Drawer_actions__BAzI9 Drawer_box__3GC_l"}},function(t,e,n){t.exports={root:"GamesSwitcher_root__2TNDL",heading:"GamesSwitcher_heading__3SrOO",list:"GamesSwitcher_list__3Qw2k",visible:"GamesSwitcher_visible__YBiVK",selected:"GamesSwitcher_selected__1NZF7"}},,function(t,e,n){t.exports={wrapper:"ThemeSwitcher_wrapper__3sSiZ Drawer_box__3GC_l",radio:"ThemeSwitcher_radio__3y2yU",selected:"ThemeSwitcher_selected__2r8Ri",light:"ThemeSwitcher_light__9R655 ThemeSwitcher_radio__3y2yU",dark:"ThemeSwitcher_dark__BaMnY ThemeSwitcher_radio__3y2yU",system:"ThemeSwitcher_system__3Z_ku ThemeSwitcher_radio__3y2yU"}},function(t,e,n){t.exports={wrap:"RotateLayout_wrap__3_K_f Drawer_box__3GC_l",button:"RotateLayout_button__22b1Q",flat:"RotateLayout_flat__2_vBD RotateLayout_button__22b1Q",pointy:"RotateLayout_pointy__wCgqC RotateLayout_button__22b1Q"}},,,function(t,e,n){t.exports={root:"MenuButton_root__2p-DT",openMenu:"MenuButton_openMenu__2T0Q7 MenuButton_root__2p-DT",closeMenu:"MenuButton_closeMenu__1zqK3 MenuButton_root__2p-DT"}},function(t,e,n){t.exports={footer:"Footer_footer__1_tAb"}},function(t,e,n){t.exports={root:"LanguageSwitcher_root__3Mev9 Drawer_box__3GC_l"}},function(t,e,n){t.exports={root:"KeyMapHints_root__2qiqW"}},,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r,a,i=n(1),o=n(12),s=n(10),c=n(4),u=n(7),l=n(2),h=n(5),d=function(){function t(e){Object(c.a)(this,t),this.storageName=e}return Object(u.a)(t,[{key:"get",value:function(t,e){var n=localStorage.getItem(this.storageName);if(null!==n){var r=JSON.parse(n);return void 0===r[t]?e||null:r[t]}return e||null}},{key:"getOrApply",value:function(t,e){if(null!==this.get(t))return this.get(t);var n=e();return this.set(t,n),n}},{key:"set",value:function(t,e){var n=localStorage.getItem(this.storageName);if(null===n)localStorage.setItem(this.storageName,JSON.stringify(Object(h.a)({},t,e)));else{var r=JSON.parse(n);r[t]=e,localStorage.setItem(this.storageName,JSON.stringify(r))}}},{key:"destroy",value:function(){console.log("destroy",this.storageName),localStorage.removeItem(this.storageName)}}]),t}();!function(t){t[t.PRE_GAME=0]="PRE_GAME",t[t.GAME=1]="GAME"}(r||(r={})),function(t){t[t.emptyCell=0]="emptyCell",t[t.p1=1]="p1",t[t.p2=2]="p2",t[t.border=3]="border"}(a||(a={}));var b=function(){function t(e){var n=this;Object(c.a)(this,t),this.storeDispose=e,this.defaultDrawerState=!1,this.defaultLanguage="rus",this.html=document.getElementsByTagName("html")[0],this.storage=new d("hex-ui"),this._drawer=this.storage.getOrApply("drawer",(function(){return n.defaultDrawerState})),this.toggleDrawer=function(){n.drawer=!n.drawer},this.drawerReaction=function(t){n.html.style.overflow=t?"hidden":"visible"},this._language=this.storage.getOrApply("language",(function(){return n.defaultLanguage})),this.setLanguage=function(t){return function(){n.language=t,window.location=window.location}},this.matchMediaListener=function(e){n.theme=t.toggleTheme(e)},this._theme=this.storage.getOrApply("theme",(function(){return t.toggleTheme(t.matchMedia)})),this.changeTheme=function(t){return function(){Object(l.p)((function(){n.theme=t}))}},this.themeReaction=function(t){var e;(e=n.html.classList).remove.apply(e,Object(s.a)(n.html.classList)),"system"!==t&&("dark"===t?n.html.classList.add("theme-dark"):n.html.classList.add("theme-light"))},this._phase=this.storage.getOrApply("phase",(function(){return r.PRE_GAME})),this.startGame=function(){n.phase=r.GAME},this.restartGame=function(){n.phase=r.PRE_GAME,n.storage.destroy(),n.storeDispose(),n.drawer=!1},Object(l.l)(this),this.themeReaction(this.theme),Object(l.o)((function(){return n.theme}),this.themeReaction),t.matchMedia.addEventListener("change",this.matchMediaListener,!0),Object(l.o)((function(){return n.drawer}),this.drawerReaction)}return Object(u.a)(t,[{key:"drawer",get:function(){return this._drawer},set:function(t){this._drawer=t,this.storage.set("drawer",this.drawer)}},{key:"language",get:function(){return this._language},set:function(t){this._language=t,this.storage.set("language",this.language)}},{key:"theme",get:function(){return this._theme},set:function(t){this.storage.set("theme",t),this._theme=t}},{key:"dispose",value:function(){t.matchMedia.removeEventListener("change",this.matchMediaListener)}},{key:"phase",get:function(){return this._phase},set:function(t){this._phase=t,this.storage.set("phase",this._phase)}}],[{key:"matchMedia",get:function(){return window.matchMedia("(prefers-color-scheme: dark)")}},{key:"toggleTheme",value:function(t){return t.matches?"dark":"light"}}]),t}(),f=n(0),j=Object(i.createContext)(null),_=function(t){var e=t.children,n=t.store;return Object(i.useEffect)((function(){return n.dispose}),[]),Object(f.jsx)(j.Provider,{value:n,children:e})},p=function(){var t=Object(i.useContext)(j);if(!t)throw new Error("hook must be used within a Provider");return t},g=function t(e,n,r,a,i,o,s,u,l){Object(c.a)(this,t),this.f0=e,this.f1=n,this.f2=r,this.f3=a,this.b0=i,this.b1=o,this.b2=s,this.b3=u,this.start_angle=l},m=function t(e,n){Object(c.a)(this,t),this.x=e,this.y=n},y=function(){function t(e,n,r){if(Object(c.a)(this,t),this.q=e,this.r=n,this.s=r,0!==Math.round(e+n+r))throw new Error("q + r + s must be 0")}return Object(u.a)(t,[{key:"id",get:function(){return"".concat(this.q,",").concat(this.r)}},{key:"add",value:function(e){return new t(this.q+e.q,this.r+e.r,this.s+e.s)}},{key:"subtract",value:function(e){return new t(this.q-e.q,this.r-e.r,this.s-e.s)}},{key:"scale",value:function(e){return new t(this.q*e,this.r*e,this.s*e)}},{key:"rotateLeft",value:function(){return new t(-this.s,-this.q,-this.r)}},{key:"rotateRight",value:function(){return new t(-this.r,-this.s,-this.q)}},{key:"neighbor",value:function(e){return this.add(t.direction(e))}},{key:"diagonalNeighbor",value:function(e){return this.add(t.diagonals[e])}},{key:"len",value:function(){return(Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s))/2}},{key:"distance",value:function(t){return this.subtract(t).len()}},{key:"round",value:function(){var e=Math.round(this.q),n=Math.round(this.r),r=Math.round(this.s),a=Math.abs(e-this.q),i=Math.abs(n-this.r),o=Math.abs(r-this.s);return a>i&&a>o?e=-n-r:i>o?n=-e-r:r=-e-n,new t(e,n,r)}},{key:"lerp",value:function(e,n){return new t(this.q*(1-n)+e.q*n,this.r*(1-n)+e.r*n,this.s*(1-n)+e.s*n)}},{key:"linedraw",value:function(e){for(var n=this.distance(e),r=new t(this.q+1e-6,this.r+1e-6,this.s-2e-6),a=new t(e.q+1e-6,e.r+1e-6,e.s-2e-6),i=[],o=1/Math.max(n,1),s=0;s<=n;s++)i.push(r.lerp(a,o*s).round());return i}}],[{key:"direction",value:function(e){return t.directions[e]}}]),t}();y.directions=[new y(1,0,-1),new y(1,-1,0),new y(0,-1,1),new y(-1,0,1),new y(-1,1,0),new y(0,1,-1)],y.diagonals=[new y(2,-1,-1),new y(1,-2,1),new y(-1,-1,2),new y(-2,1,1),new y(-1,2,-1),new y(1,1,-2)];var O=function(){function t(e,n,r){Object(c.a)(this,t),this.orientation=e,this.size=n,this.origin=r}return Object(u.a)(t,[{key:"hexToPixel",value:function(t){var e=this.orientation,n=this.size,r=this.origin,a=(e.f0*t.q+e.f1*t.r)*n.x,i=(e.f2*t.q+e.f3*t.r)*n.y;return new m(a+r.x,i+r.y)}},{key:"pixelToHex",value:function(t){var e=this.orientation,n=this.size,r=this.origin,a=new m((t.x-r.x)/n.x,(t.y-r.y)/n.y),i=e.b0*a.x+e.b1*a.y,o=e.b2*a.x+e.b3*a.y;return new y(i,o,-i-o)}},{key:"hexCornerOffset",value:function(t){var e=this.orientation,n=this.size,r=2*Math.PI*(e.start_angle-t)/6;return new m(n.x*Math.cos(r),n.y*Math.sin(r))}},{key:"polygonCorners",value:function(t){for(var e=[],n=this.hexToPixel(t),r=0;r<6;r++){var a=this.hexCornerOffset(r);e.push(new m(n.x+a.x,n.y+a.y))}return e}}]),t}();O.pointy=new g(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),O.flat=new g(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0);for(var v={"-6,0":["center-1-1","center-1-2"],"6,0":["center-2-1","center-2-2"],"6,-11":"player-2-4","-6,11":"player-2-3","5,-11":"player-1-3","-5,11":"player-1-4"},w=-5,x=-1;w<=4;w++,x--)v["".concat(w,",").concat(x)]="player-1-start",v["".concat(-1*w,",").concat(-1*x)]="player-1-end";for(var k=1;k<=10;k++)v["-6,".concat(k)]="player-2-start",v["6,".concat(-1*k)]="player-2-end";var M=Object.keys(v),E=n(6),S=function(t){var e={};return Object.values(t).forEach((function(t){var n,r,a=t.hex,i=t.type,o=(n=a.q,r=a.r,new y(n,r,-1*(n+r)));e[o.id]={hex:o,type:i}})),e},C=function(t){t.orientation=O[t.storage.getOrApply("orientation",(function(){return"flat"}))],t.playerMove=t.storage.getOrApply("playerMove",(function(){return a.p1})),t.tiles=S(t.storage.getOrApply("tiles",(function(){return function(t){var e={};return t.forEach((function(t){var n=t.join(",");e[n]={hex:{q:t[0],r:t[1]},type:M.includes(n)?a.border:a.emptyCell}})),e}(function(t){for(var e=t+2,n=[],r=(e-1)/2,a=0,i=-1*r;i<=r;i++){for(var o=a;o<=e-1+a;o++)n.push([i,o]);a--}var c=n.map((function(t){return Object(E.a)(t,1)[0]})),u=n.map((function(t){return Object(E.a)(t,2)[1]})),l=[Math.max.apply(Math,Object(s.a)(c)),Math.min.apply(Math,Object(s.a)(u))].join(","),h=[Math.min.apply(Math,Object(s.a)(c)),Math.max.apply(Math,Object(s.a)(u))].join(",");return n.filter((function(t){var e=t.join(",");return e!==l&&e!==h}))}(t.size))})))},N=function(t){var e=t.isPointy,n=e?t.smallSide:t.largeSide,r=e?t.largeSide:t.smallSide;Object(l.p)((function(){t.R=Math.min(t.width/n,t.height/(2*r)),t.layout=new O(t.orientation,new m(t.R,t.R),new m(t.width/2,t.R*r))}))},q=function(t){return function(){var e=Object(E.a)(t.elSizes,2),n=e[0],r=e[1];t.width===n&&t.height===r||(Object(l.p)((function(){t.width=n,t.height=r})),N(t))}},G=n(21),R=[],D=[],B=[];Object.keys(v).forEach((function(t){switch(v[t]){case"player-1-start":R.push(t);break;case"player-1-end":D.push(t);break;case"player-2-start":B.push(t)}}));var L=[0,5],T=new Set,A=function(t){var e,n=Object(G.a)(R);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=t[i].hex,s=!1,c=Object(G.a)(L);try{for(c.s();!(r=c.n()).done;){var u=r.value,l=t[o.neighbor(u).id];if(l.type===a.p1){T.add(l.type),console.log({tileId:i,direction:u,neighbor:l.hex.id,element:document.querySelector('[data-qr="'.concat(l.hex.id,'"]'))}),s=!0;break}}}catch(h){c.e(h)}finally{c.f()}if(s)break}}catch(h){n.e(h)}finally{n.f()}},I=function(){function t(){var e=this;Object(c.a)(this,t),this.ratio=.8660254,this.largeSide=18,this.smallSide=18*this.ratio,this.size=11,this.width=0,this.height=0,this.R=0,this.preSit=!1,this.hoveredId=null,this.storage=new d("hex-game"),this._tiles={},this.layout=new O(this.orientation,new m(0,0),new m(0,0)),this._playerMove=a.p1,this.dispose=function(){try{window.removeEventListener("resize",e.debounce),e.storage.destroy(),C(e),window.location.reload()}catch(t){console.warn("%cTODO","font-size:50px;",t)}},this._arenaElement=null,this.debounce=function(t,e){var n;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=this,s=function(){n=null,t.apply(o,a)};clearTimeout(n),n=setTimeout(s,e)}}(q(this),400),this._orientation=O.flat,C(this),Object(l.l)(this,{ratio:!1,largeSide:!1,smallSide:!1,storage:!1}),setTimeout((function(){A(e.tiles)}),0)}return Object(u.a)(t,[{key:"tiles",get:function(){return this._tiles},set:function(t){this._tiles=t,this.storage.set("tiles",this.tiles)}},{key:"playerMove",get:function(){return this._playerMove},set:function(t){this._playerMove=t,this.storage.set("playerMove",this.playerMove)}},{key:"arenaElement",get:function(){return this._arenaElement},set:function(t){this._arenaElement=t,q(this)(),window.addEventListener("resize",this.debounce,!1)}},{key:"elSizes",get:function(){var t=this.arenaElement;return t?[t.offsetWidth,t.offsetHeight]:[0,0]}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation=t,this.storage.set("orientation",this.orientationType)}},{key:"orientationType",get:function(){return this.isPointy?"pointy":"flat"}},{key:"isPointy",get:function(){return.5===this.orientation.start_angle}}]),t}(),P=Object(i.createContext)(null),z=function(t){var e=t.children,n=t.store;return Object(i.useEffect)((function(){return n.dispose}),[]),Object(f.jsx)(P.Provider,{value:n,children:e})},F=function(){var t=Object(i.useContext)(P);if(!t)throw new Error("hook must be used within a Provider");return t},J=n(3),H=n(22),K=n.n(H),Y=Object(J.a)((function(){var t=p();return Object(f.jsx)("button",{className:t.drawer?K.a.closeMenu:K.a.openMenu,onClick:t.toggleDrawer})})),W=n(14),Q=n.n(W),U=n(15),V=n.n(U),Z=n(23),X=n.n(Z),$=function(){return Object(f.jsxs)("footer",{className:X.a.footer,children:["bonez \xa9 2020 - ",(new Date).getFullYear()]})},tt=n(16),et=n.n(tt),nt=JSON.parse(localStorage.getItem("ui")||JSON.stringify({language:"rus"})).language||"rus",rt={rus:{yacht:"\u042f\u0445\u0442\u0430",indigo:"\u0418\u043d\u0434\u0438\u0433\u043e",hex:"\u0413\u0435\u043a\u0441",systemTheme:"\u0418\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b","button.startNewGame":"\u041d\u0430\u0447\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0438\u0433\u0440\u0443","button.restartGame":"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e","button.startGame":"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443","button.cancel":"\u041e\u0442\u043c\u0435\u043d\u0430","button.addPlayer":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0433\u0440\u043e\u043a\u0430","button.restart":"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e","button.rotate":"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c","button.light":"\u0421\u0432\u0435\u0442\u043b\u0430\u044f","button.dark":"\u0422\u0435\u043c\u043d\u0430\u044f","button.system":"\u041a\u0430\u043a \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435","button.apply":"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",currentGameWillBeLost:"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0438\u0433\u0440\u0430 \u0431\u0443\u0434\u0435\u0442 \u0443\u0442\u0435\u0440\u044f\u043d\u0430.","text.placeChip":"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u0448\u043a\u0443","text.rotateField":"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u043e\u043b\u0435","text.showDrawer":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0435\u043d\u044e"},eng:{yacht:"Yacht",indigo:"Indigo",hex:"Hex",systemTheme:"System theme","button.startNewGame":"Start new game","button.restartGame":"Restart game","button.cancel":"Cancel","button.startGame":"Start game","button.addPlayer":"Add player","button.restart":"Restart","button.rotate":"Rotate","button.light":"Light","button.dark":"Dark","button.system":"System","button.apply":"Apply",currentGameWillBeLost:"Current game will be lost.","text.placeChip":"Place chip","text.rotateField":"Rotate field","text.showDrawer":"Show drawer"}},at=function(t){var e=rt[nt][t];return void 0===e?"~".concat(t,"~"):e},it=function(){var t=Object(i.useState)(!1),e=Object(E.a)(t,2),n=e[0],r=e[1],a=Object(i.useCallback)((function(){r(!0)}),[]),o=Object(i.useCallback)((function(){r(!1)}),[]);return Object(i.useEffect)((function(){n?document.addEventListener("click",o):document.removeEventListener("click",o)}),[n,o]),Object(f.jsxs)("div",{className:et.a.root,children:[Object(f.jsx)("h1",{className:et.a.heading,onClick:a,children:at("hex")}),Object(f.jsxs)("ul",{className:Q()(et.a.list,Object(h.a)({},et.a.visible,n)),children:[Object(f.jsx)("li",{className:et.a.selected,children:at("hex")}),Object(f.jsx)("li",{onClick:function(){window.location="https://bnz.github.io/indigo/"},children:at("indigo")}),Object(f.jsx)("li",{onClick:function(){window.location="https://bnz.github.io/yacht/"},children:at("yacht")})]})]})},ot=n(24),st=n.n(ot),ct=Object(J.a)((function(){var t=p(),e=t.language;return Object(f.jsxs)("div",{className:st.a.root,children:[Object(f.jsx)("button",{disabled:"rus"===e,onClick:t.setLanguage("rus"),children:"\u0440\u0443\u0441"}),Object(f.jsx)("button",{disabled:"eng"===e,onClick:t.setLanguage("eng"),children:"eng"})]})})),ut=n(18),lt=n.n(ut),ht=Object(J.a)((function(){var t=p(),e=t.theme,n=function(t){return Q()(lt.a[t],Object(h.a)({},lt.a.selected,e===t))};return Object(f.jsxs)("div",{className:lt.a.wrapper,children:[Object(f.jsx)("input",{type:"radio",className:n("light"),onClick:t.changeTheme("light")}),Object(f.jsx)("input",{type:"radio",className:n("dark"),onClick:t.changeTheme("dark")}),Object(f.jsx)("input",{type:"radio",className:n("system"),onClick:t.changeTheme("system")})]})})),dt=n(9),bt=n.n(dt),ft=n(11),jt=n.n(ft),_t=document.getElementById("root"),pt=function(t){var e=t.children,n=Object(i.useRef)(document.createElement("div"));return Object(i.useEffect)((function(){var t=n.current;return null===_t||void 0===_t||_t.appendChild(t),function(){null===_t||void 0===_t||_t.removeChild(t)}}),[]),Object(o.createPortal)(e,n.current)},gt=function(t){var e=t.actions;return Object(i.useEffect)((function(){var t=function(t){var n;null===(n=e[t.code])||void 0===n||n.call(e)};return window.addEventListener("keyup",t,!0),function(){window.removeEventListener("keyup",t,!0)}}),[]),null},mt=function(t){var e=t.heading,n=t.close,r=t.children,a=t.footer;return Object(f.jsxs)(pt,{children:[Object(f.jsx)(gt,{actions:{Escape:n}}),Object(f.jsx)("div",{className:jt.a.backdrop,onClick:n}),Object(f.jsxs)("div",{className:jt.a.root,children:[void 0!==e&&Object(f.jsxs)("h2",{className:jt.a.header,children:[e,n&&Object(f.jsx)("button",{className:jt.a.closeButton,onClick:n})]}),Object(f.jsx)("section",{className:jt.a.content,children:r}),void 0!==a&&Object(f.jsx)("footer",{className:jt.a.footer,children:a})]})]})},yt=Object(J.a)((function(){return Object(f.jsx)("button",{className:bt.a.main,onClick:p().restartGame,children:at("button.restart")})})),Ot=function(){var t=Object(i.useState)(!1),e=Object(E.a)(t,2),n=e[0],r=e[1],a=Object(i.useCallback)((function(){r(!1)}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:bt.a.restart,onClick:function(){r(!0)},children:at("button.restart")}),n&&Object(f.jsx)(mt,{heading:"".concat(at("button.restartGame"),"?"),close:a,footer:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:bt.a.text,onClick:a,children:at("button.cancel")}),Object(f.jsx)(yt,{})]}),children:Object(f.jsx)("div",{style:{textAlign:"center"},children:at("currentGameWillBeLost")})})]})},vt=n(19),wt=n.n(vt),xt=function(t,e){return function(){Object(l.p)((function(){t.orientation="flat"===e?O.flat:O.pointy;var n=Object(E.a)(t.elSizes,2),r=n[0],a=n[1];t.width=r,t.height=a,N(t)}))}},kt=Object(J.a)((function(){var t=F(),e=t.isPointy;return Object(f.jsxs)("div",{className:wt.a.wrap,children:[Object(f.jsx)("button",{disabled:!e,className:wt.a.flat,onClick:xt(t,"flat")}),Object(f.jsx)("button",{disabled:e,className:wt.a.pointy,onClick:xt(t,"pointy")})]})})),Mt=n(25),Et=n.n(Mt),St={Enter:"text.placeChip",R:"text.rotateField",D:"text.showDrawer"},Ct=function(){return Object(f.jsx)("ul",{className:Et.a.root,children:Object.keys(St).map((function(t){return Object(f.jsxs)("li",{children:[Object(f.jsx)("code",{children:t})," - ",at(St[t])]},t)}))})},Nt=Object(J.a)((function(){var t=p();return Object(f.jsxs)("div",{className:Q()(Object(h.a)({},V.a.hidden,!t.drawer)),children:[Object(f.jsx)("div",{className:V.a.backdrop,onClick:t.toggleDrawer}),Object(f.jsxs)("div",{className:V.a.drawer,children:[Object(f.jsx)(it,{}),Object(f.jsxs)("div",{className:V.a.content,children:[Object(f.jsx)(ct,{}),Object(f.jsx)(ht,{}),t.phase===r.GAME&&Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:V.a.actions,children:[Object(f.jsx)(Ot,{}),Object(f.jsx)(kt,{}),Object(f.jsx)(Ct,{})]})})]}),Object(f.jsx)($,{})]})]})})),qt=function(){return Object(f.jsx)("button",{className:bt.a.main,onClick:p().startGame,children:at("button.startNewGame")})},Gt=n(8),Rt=function(t){return function(e){if(!t.preSit){var n=e.currentTarget.getBoundingClientRect(),r=t.layout.pixelToHex({x:e.pageX-n.x,y:e.pageY-n.y}).round();Object(l.p)((function(){t.tiles[r.id]&&t.tiles[r.id].type===a.emptyCell?t.hoveredId=r.id:t.hoveredId=null}))}}},Dt=function(t){return function(){Object(l.p)((function(){null!==t.hoveredId&&t.tiles[t.hoveredId].type!==t.playerMove&&(t.tiles[t.hoveredId].type=t.playerMove,t.storage.set("tiles",t.tiles),A(t.tiles))}))}},Bt=(n(32),Object(J.a)((function(t){var e=t.children,n=F(),r=Object(i.useRef)(null);return Object(i.useEffect)((function(){n.arenaElement=r.current}),[n.arenaElement]),Object(f.jsx)("div",Object(Gt.a)({ref:r,className:n.orientationType},Object(i.useMemo)((function(){return null===n.arenaElement?{}:{style:Object(h.a)({},"--R","".concat(n.R,"px")),onClick:Dt(n),onMouseMove:Rt(n),children:e}}),[n.arenaElement,n.R])))}))),Lt=Object(J.a)((function(t){var e=t.data;return Object(f.jsx)("div",Object(Gt.a)(Object(Gt.a)({"data-qr":e.qr},e.p?{className:"p".concat(e.p)}:{}),e.border?{"data-b":""}:{}))})),Tt=(n(33),n(34),function(){return Object(f.jsx)(f.Fragment,{children:Object.entries(F().tiles).map((function(t,e){return Object(f.jsx)(Lt,{data:Object(l.l)({get qr(){return[t[1].hex.q,t[1].hex.r].join(",")},get border(){return t[1].type===a.border},get p(){switch(t[1].type){case a.p1:return a.p1;case a.p2:return a.p2;default:return}}})},e)}))})}),At=Object(J.a)((function(){var t=F(),e=t.hoveredId,n=function(t){var e=Object(i.useRef)();return Object(i.useEffect)((function(){e.current=t}),[t]),e.current}(e),r=t.playerMove;return Object(f.jsx)("div",Object(Gt.a)(Object(Gt.a)({},Object(h.a)({},"data-hovered-player-".concat(r),"")),{},{"data-qr":null===e?n:e}))})),It=function(t){return function(){xt(t,t.isPointy?"flat":"pointy")()}},Pt=function(){var t=F(),e=p().toggleDrawer;return Object(f.jsx)(gt,{actions:{KeyR:It(t),KeyD:e,Enter:Dt(t)}})},zt=function(){return Object(f.jsxs)(Bt,{children:[Object(f.jsx)(Pt,{}),Object(f.jsx)(Tt,{}),Object(f.jsx)(At,{})]})},Ft=Object(J.a)((function(){switch(p().phase){case r.PRE_GAME:return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{style:{padding:"calc(var(--spacing) * 10)",textAlign:"center"},children:Object(f.jsx)(qt,{})})});case r.GAME:return Object(f.jsx)(zt,{});default:return null}})),Jt=(n(35),n(36),n(37),n(38),new I);Object(o.render)(Object(f.jsx)(i.StrictMode,{children:Object(f.jsx)(_,{store:new b(Jt.dispose),children:Object(f.jsxs)(z,{store:Jt,children:[Object(f.jsx)(Ft,{}),Object(f.jsx)(Nt,{}),Object(f.jsx)(Y,{})]})})}),document.getElementById("root"))}],[[39,1,2]]]);
//# sourceMappingURL=main.f66d8a53.chunk.js.map