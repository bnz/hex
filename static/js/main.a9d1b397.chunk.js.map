{"version":3,"sources":["jsx/Components/Button/Button.module.css","jsx/Components/Dialog/Dialog.module.css","jsx/Layout/Drawer/Drawer.module.css","jsx/Layout/Drawer/GamesSwitcher/GamesSwitcher.module.css","jsx/Layout/Drawer/ThemeSwitcher/ThemeSwitcher.module.css","jsx/Layout/Drawer/RotateLayout/RotateLayout.module.css","jsx/Layout/MenuButton/MenuButton.module.css","jsx/Game/EndGame/EndGame.module.css","jsx/Layout/Drawer/Footer/Footer.module.css","jsx/Layout/Drawer/LanguageSwitcher/LanguageSwitcher.module.css","jsx/Layout/Drawer/KeyMapHints/KeyMapHints.module.css","types.tsx","Storage/LocalStorageMgmnt.ts","Storage/UIStore/UIStore.ts","Storage/UIStore/UIStoreProvider.tsx","jsx/Hexagons/Orientation.ts","jsx/Hexagons/Point.ts","jsx/Hexagons/Hex.ts","jsx/Hexagons/Layout.ts","jsx/Game/Tile/tilesMap.ts","helpers/debounce.ts","helpers/keys.ts","Storage/Store/applyers/generateTiles.ts","Storage/Store/applyers/objectToHex.ts","Storage/Store/applyers/toHex.ts","Storage/Store/applyers/init.ts","Storage/Store/defaults/tiles.ts","Storage/Store/applyers/recalc.ts","Storage/Store/applyers/onWindowResize.ts","Storage/Store/applyers/PathFinder.ts","Storage/Store/applyers/endGame.ts","Storage/Store/Store.ts","Storage/Store/StoreProvider.tsx","jsx/Layout/MenuButton/MenuButton.tsx","jsx/Layout/Drawer/Footer/Footer.tsx","i18n/i18n.tsx","i18n/rus.ts","i18n/eng.ts","jsx/Layout/Drawer/GamesSwitcher/GamesSwitcher.tsx","jsx/Layout/Drawer/LanguageSwitcher/LanguageSwitcher.tsx","jsx/Layout/Drawer/ThemeSwitcher/ThemeSwitcher.tsx","jsx/Components/Modal/Modal.ts","jsx/Components/KeyboardActions/KeyboardActions.ts","jsx/Components/Dialog/Dialog.tsx","jsx/Layout/Drawer/RestartGame/RestartButton.tsx","jsx/Layout/Drawer/RestartGame/RestartGame.tsx","Storage/Store/applyers/changeOrientation.ts","jsx/Layout/Drawer/RotateLayout/RotateLayout.tsx","jsx/Layout/Drawer/KeyMapHints/KeyMapHints.tsx","jsx/Layout/Drawer/Drawer.tsx","jsx/Rules/StartButton/StartButton.tsx","Storage/Store/applyers/onMouseMove.ts","Storage/Store/applyers/onClick.ts","jsx/Game/Arena/ArenaWrapper.tsx","jsx/Game/Tile/Tile.tsx","jsx/Game/Tile/Tiles.tsx","jsx/Game/Tile/TileHovered.tsx","Storage/Store/applyers/toggleOrientation.ts","jsx/Game/Arena/ArenaKeyboardActions.tsx","jsx/Game/EndGame/EndGame.tsx","jsx/Game/Arena/Arena.tsx","jsx/Game/Game.tsx","index.tsx"],"names":["module","exports","UIPhase","HexType","LocalStorageMgmnt","storageName","key","fallback","data","localStorage","getItem","this","d","JSON","parse","undefined","callback","get","res","set","value","setItem","stringify","console","log","removeItem","UIStore","storeDispose","defaultDrawerState","defaultLanguage","html","document","getElementsByTagName","storage","_drawer","getOrApply","toggleDrawer","drawer","drawerReaction","flag","style","overflow","_language","setLanguage","language","window","location","matchMediaListener","e","theme","toggleTheme","_theme","matchMedia","changeTheme","runInAction","themeReaction","classList","remove","add","_phase","PRE_GAME","startGame","phase","GAME","restartGame","destroy","makeAutoObservable","reaction","addEventListener","removeEventListener","matches","Context","createContext","UIStoreProvider","children","store","useEffect","dispose","Provider","useUIStore","useContext","Error","Orientation","f0","f1","f2","f3","b0","b1","b2","b3","start_angle","Point","x","y","Hex","q","r","s","Math","round","b","k","direction","diagonals","abs","subtract","len","qi","ri","si","q_diff","r_diff","s_diff","t","N","distance","a_nudge","b_nudge","results","step","max","i","push","lerp","directions","Layout","orientation","size","origin","h","M","p","pt","corner","angle","PI","cos","sin","corners","center","hexToPixel","offset","hexCornerOffset","pointy","sqrt","flat","keys","Object","tilesMap","j","tilesMapKeys","players","p1","Set","p2","forEach","tileId","objectToHex","tilesObject","tiles","values","_hex","hex","type","id","init","playerMove","result","item","join","includes","border","emptyCell","generateTiles","_size","fromTo","a","qs","map","rs","min","filter","recalc","isPointy","widthSize","smallSide","largeSide","heightSize","R","width","height","layout","onWindowResize","elSizes","PathFinder","endGameAction","allDirections","Array","cache","name","start","end","run","neighbor","has","endGame","Store","ratio","preSit","hoveredId","_tiles","_playerMove","debounce","reload","warn","_arenaElement","func","wait","timeout","args","context","later","apply","clearTimeout","setTimeout","_orientation","el","arenaElement","offsetWidth","offsetHeight","orientationType","HexContext","StoreProvider","useStore","MenuButton","observer","className","styles","closeMenu","openMenu","onClick","Footer","footer","Date","getFullYear","lang","languagesMap","rus","yacht","indigo","systemTheme","currentGameWillBeLost","eng","i18n","GamesSwitcher","useState","visible","setVisible","open","useCallback","close","root","heading","cx","list","selected","LanguageSwitcher","disabled","ThemeSwitcher","fn","th","wrapper","getElementById","Modal","useRef","createElement","div","current","appendChild","removeChild","createPortal","KeyboardActions","actions","code","Dialog","Escape","backdrop","header","closeButton","content","RestartButton","buttonStyles","main","RestartGame","dialogVisible","setDialogVisible","restart","text","textAlign","changeOrientation","RotateLayout","wrap","Enter","D","KeyMapHints","Drawer","hidden","StartButton","onMouseMove","rect","currentTarget","getBoundingClientRect","pixelToHex","pageX","pageY","ArenaWrapper","arenaRef","ref","useMemo","Tile","data-qr","qr","Tiles","entries","entry","TileHovered","prev","usePrevious","move","toggleOrientation","ArenaKeyboardActions","KeyR","KeyD","EndGame","setOpen","h3","replace","Arena","Game","padding","render"],"mappings":"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","file":"static/js/main.a9d1b397.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3tE03\",\"withIcon\":\"Button_withIcon__3mxLj\",\"buttonContained\":\"Button_buttonContained__1_qjk\",\"main\":\"Button_main__xrucu Button_button__3tE03 Button_buttonContained__1_qjk\",\"text\":\"Button_text__1-Elw Button_button__3tE03\",\"restart\":\"Button_restart__18J1J Button_button__3tE03 Button_buttonContained__1_qjk Button_withIcon__3mxLj\",\"rotate\":\"Button_rotate__36yKG Button_button__3tE03 Button_buttonContained__1_qjk Button_withIcon__3mxLj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Dialog_root__NRShG\",\"backdrop\":\"Dialog_backdrop__1sYxI\",\"header\":\"Dialog_header__1azbN\",\"content\":\"Dialog_content__2meVV\",\"closeButton\":\"Dialog_closeButton__1r6o3 Button_button__3tE03\",\"footer\":\"Dialog_footer__YAeCI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"drawer\":\"Drawer_drawer__1HalH\",\"hidden\":\"Drawer_hidden__2OHcw\",\"backdrop\":\"Drawer_backdrop__gWGnm\",\"content\":\"Drawer_content__1bryE\",\"box\":\"Drawer_box__3GC_l\",\"actions\":\"Drawer_actions__BAzI9 Drawer_box__3GC_l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"GamesSwitcher_root__2TNDL\",\"heading\":\"GamesSwitcher_heading__3SrOO\",\"list\":\"GamesSwitcher_list__3Qw2k\",\"visible\":\"GamesSwitcher_visible__YBiVK\",\"selected\":\"GamesSwitcher_selected__1NZF7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ThemeSwitcher_wrapper__3sSiZ Drawer_box__3GC_l\",\"radio\":\"ThemeSwitcher_radio__3y2yU\",\"selected\":\"ThemeSwitcher_selected__2r8Ri\",\"light\":\"ThemeSwitcher_light__9R655 ThemeSwitcher_radio__3y2yU\",\"dark\":\"ThemeSwitcher_dark__BaMnY ThemeSwitcher_radio__3y2yU\",\"system\":\"ThemeSwitcher_system__3Z_ku ThemeSwitcher_radio__3y2yU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"RotateLayout_wrap__3_K_f Drawer_box__3GC_l\",\"button\":\"RotateLayout_button__22b1Q\",\"flat\":\"RotateLayout_flat__2_vBD RotateLayout_button__22b1Q\",\"pointy\":\"RotateLayout_pointy__wCgqC RotateLayout_button__22b1Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"MenuButton_root__2p-DT\",\"openMenu\":\"MenuButton_openMenu__2T0Q7 MenuButton_root__2p-DT\",\"closeMenu\":\"MenuButton_closeMenu__1zqK3 MenuButton_root__2p-DT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"EndGame_wrap__1Lt1a\",\"h3\":\"EndGame_h3__igm8l\",\"hex\":\"EndGame_hex__1bbJD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__1_tAb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"LanguageSwitcher_root__3Mev9 Drawer_box__3GC_l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"KeyMapHints_root__2qiqW\"};","import { PlayerMove } from \"./Storage/Store/applyers/onClick\"\nimport { TileId } from \"./jsx/Game/Tile/TileId\"\nimport { Hex } from \"./jsx/Hexagons/Hex\"\n\nexport enum UIPhase {\n    PRE_GAME,\n    GAME,\n}\n\nexport type OrientationType = \"flat\" | \"pointy\"\n\nexport type Tiles = Record<TileId, Tile>\n\nexport interface Tile {\n    hex: Hex\n    type: HexType\n}\n\nexport type Keys =\n    | \"orientation\"\n    | \"tiles\"\n    | \"playerMove\"\n\nexport type Values =\n    | OrientationType\n    | PlayerMove\n    | Tiles\n\nexport enum HexType {\n    emptyCell = 0,\n    p1 = 1,\n    p2 = 2,\n    border = 3,\n}\n","export interface iLocalStorageMgmnt<K, V> {\n    get(key: K, fallback?: V): any | null\n    set(key: K, value: V): void\n    getOrApply<T>(key: K, callback: () => T): T\n    destroy(): void\n}\n\nexport class LocalStorageMgmnt<K, V> implements iLocalStorageMgmnt<K, V> {\n\n    constructor(\n        private storageName: string,\n    ) {\n    }\n\n    get(key: K, fallback?: V) {\n        const data = localStorage.getItem(this.storageName)\n\n        if (data !== null) {\n            const d = JSON.parse(data)\n            return d[key] === undefined ? fallback || null : d[key]\n        }\n\n        return fallback || null\n    }\n\n    getOrApply<T>(key: K, callback: () => T): T {\n        if (this.get(key) !== null) {\n            return this.get(key)\n        }\n        const res = callback()\n        // @ts-ignore TODO\n        this.set(key, res)\n        return res\n    }\n\n    set(key: K, value: V) {\n        const data = localStorage.getItem(this.storageName)\n\n        if (data === null) {\n            localStorage.setItem(this.storageName, JSON.stringify({\n                // @ts-ignore FIXME\n                [key]: value,\n            }))\n        } else {\n            const d = JSON.parse(data)\n            d[key] = value\n            localStorage.setItem(this.storageName, JSON.stringify(d))\n        }\n    }\n\n    destroy() {\n        console.log(\"destroy\", this.storageName)\n        localStorage.removeItem(this.storageName)\n    }\n\n}\n","import { makeAutoObservable, reaction, runInAction } from \"mobx\"\nimport { LocalStorageMgmnt } from \"../LocalStorageMgmnt\"\nimport { Language } from \"../../i18n/i18n\"\nimport { UIPhase } from \"../../types\"\n\nexport type Theme = \"light\" | \"dark\" | \"system\"\n\nexport type UIKeys = \"drawer\" | \"language\" | \"theme\" | \"phase\"\n\nexport type UIValues = boolean | Language | Theme | UIPhase\n\nexport class UIStore {\n\n    /**\n     * Defaults\n     */\n    private defaultDrawerState = false\n    private defaultLanguage: Language = \"rus\"\n    private html = document.getElementsByTagName(\"html\")[0]\n\n    constructor(\n        private storeDispose: () => void,\n    ) {\n        makeAutoObservable(this)\n\n        // Theme stuff\n        this.themeReaction(this.theme)\n        reaction(() => this.theme, this.themeReaction)\n        UIStore.matchMedia.addEventListener(\"change\", this.matchMediaListener, true)\n\n        // Drawer stuff\n        reaction(() => this.drawer, this.drawerReaction)\n    }\n\n    storage = new LocalStorageMgmnt<UIKeys, UIValues>(\"hex-ui\")\n\n    // Drawer - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    private _drawer = this.storage.getOrApply(\"drawer\", () => this.defaultDrawerState)\n\n    get drawer() {\n        return this._drawer\n    }\n\n    private set drawer(flag: boolean) {\n        this._drawer = flag\n        this.storage.set(\"drawer\", this.drawer)\n    }\n\n    toggleDrawer = () => {\n        this.drawer = !this.drawer\n    }\n\n    drawerReaction = (flag: boolean) => {\n        if (flag) {\n            this.html.style.overflow = \"hidden\"\n        } else {\n            this.html.style.overflow = \"visible\"\n        }\n    }\n\n    // Language - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    private _language: Language = this.storage.getOrApply(\"language\", () => this.defaultLanguage)\n\n    get language() {\n        return this._language\n    }\n\n    set language(language: Language) {\n        this._language = language\n        this.storage.set(\"language\", this.language)\n    }\n\n    setLanguage = (language: Language): () => void => (): void => {\n        this.language = language\n        // eslint-disable-next-line no-self-assign\n        window.location = window.location\n    }\n\n    // Theme - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    private static get matchMedia() {\n        return window.matchMedia(\"(prefers-color-scheme: dark)\")\n    }\n\n    private static toggleTheme(e: any): Theme {\n        return e.matches ? \"dark\" : \"light\"\n    }\n\n    private matchMediaListener = (e: any) => {\n        this.theme = UIStore.toggleTheme(e)\n    }\n\n    private _theme: Theme = this.storage.getOrApply(\"theme\", () => UIStore.toggleTheme(UIStore.matchMedia))\n\n    get theme(): Theme {\n        return this._theme\n    }\n\n    set theme(theme: Theme) {\n        this.storage.set(\"theme\", theme)\n        this._theme = theme\n    }\n\n    changeTheme = (theme: Theme): () => void => () => {\n        runInAction(() => {\n            this.theme = theme\n        })\n    }\n\n    private themeReaction = (theme: Theme): void => {\n        // @ts-ignore\n        this.html.classList.remove(...this.html.classList)\n        if (theme !== \"system\") {\n            if (theme === \"dark\") {\n                this.html.classList.add(\"theme-dark\")\n            } else {\n                this.html.classList.add(\"theme-light\")\n            }\n        }\n    }\n\n    dispose(): void {\n        UIStore.matchMedia.removeEventListener(\"change\", this.matchMediaListener)\n    }\n\n    // Phase - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    private _phase = this.storage.getOrApply<UIPhase>(\"phase\", () => UIPhase.PRE_GAME)\n\n    get phase() {\n        return this._phase\n    }\n\n    set phase(phase: UIPhase) {\n        this._phase = phase\n        this.storage.set(\"phase\", this._phase)\n    }\n\n    startGame = () => {\n        this.phase = UIPhase.GAME\n    }\n\n    restartGame = () => {\n        this.phase = UIPhase.PRE_GAME\n        this.storage.destroy()\n        this.storeDispose()\n        this.drawer = false\n    }\n}\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport { createContext, FC, useContext, useEffect } from \"react\"\nimport { UIStore } from \"./UIStore\"\n\nconst Context = createContext<UIStore | null>(null)\n\nexport const UIStoreProvider: FC<{ store: UIStore }> = ({ children, store }) => {\n    useEffect(() => store.dispose, [])\n\n    return (\n        <Context.Provider value={store}>\n            {children}\n        </Context.Provider>\n    )\n}\n\nexport const useUIStore = (): UIStore => {\n    const store = useContext(Context)\n    if (!store) {\n        throw new Error('hook must be used within a Provider')\n    }\n    return store\n}\n","export class Orientation {\n    constructor(\n        public f0: number,\n        public f1: number,\n        public f2: number,\n        public f3: number,\n        public b0: number,\n        public b1: number,\n        public b2: number,\n        public b3: number,\n        public start_angle: number,\n    ) {\n    }\n}\n","export class Point {\n\n    constructor(\n        public x: number,\n        public y: number,\n    ) {\n    }\n\n}\n","import { TileId } from \"../Game/Tile/TileId\"\n\nexport class Hex {\n\n    constructor(\n        public q: number,\n        public r: number,\n        public s: number,\n    ) {\n        if (Math.round(q + r + s) !== 0) {\n            throw new Error('q + r + s must be 0')\n        }\n    }\n\n    public get id(): TileId {\n        return `${this.q},${this.r}` as TileId\n    }\n\n    public add(b: Hex): Hex {\n        return new Hex(\n            this.q + b.q,\n            this.r + b.r,\n            this.s + b.s,\n        )\n    }\n\n    public subtract(b: Hex): Hex {\n        return new Hex(\n            this.q - b.q,\n            this.r - b.r,\n            this.s - b.s,\n        )\n    }\n\n    public scale(k: number): Hex {\n        return new Hex(\n            this.q * k,\n            this.r * k,\n            this.s * k,\n        )\n    }\n\n    public rotateLeft(): Hex {\n        return new Hex(\n            -this.s,\n            -this.q,\n            -this.r,\n        )\n    }\n\n    public rotateRight(): Hex {\n        return new Hex(\n            -this.r,\n            -this.s,\n            -this.q,\n        )\n    }\n\n    public static directions: Hex[] = [\n        new Hex(1, 0, -1),\n        new Hex(1, -1, 0),\n        new Hex(0, -1, 1),\n        new Hex(-1, 0, 1),\n        new Hex(-1, 1, 0),\n        new Hex(0, 1, -1),\n    ]\n\n    public static direction(direction: number): Hex {\n        return Hex.directions[direction]\n    }\n\n    public neighbor(direction: number): Hex {\n        return this.add(Hex.direction(direction))\n    }\n\n    public static diagonals: Hex[] = [\n        new Hex(2, -1, -1),\n        new Hex(1, -2, 1),\n        new Hex(-1, -1, 2),\n        new Hex(-2, 1, 1),\n        new Hex(-1, 2, -1),\n        new Hex(1, 1, -2),\n    ]\n\n    public diagonalNeighbor(direction: number): Hex {\n        return this.add(Hex.diagonals[direction])\n    }\n\n    public len(): number {\n        return (Math.abs(this.q) + Math.abs(this.r) + Math.abs(this.s)) / 2\n    }\n\n    public distance(b: Hex): number {\n        return this.subtract(b).len()\n    }\n\n    public round(): Hex {\n        let qi = Math.round(this.q)\n        let ri = Math.round(this.r)\n        let si = Math.round(this.s)\n\n        const q_diff = Math.abs(qi - this.q)\n        const r_diff = Math.abs(ri - this.r)\n        const s_diff = Math.abs(si - this.s)\n\n        if (q_diff > r_diff && q_diff > s_diff) {\n            qi = -ri - si\n        } else if (r_diff > s_diff) {\n            ri = -qi - si\n        } else {\n            si = -qi - ri\n        }\n\n        return new Hex(qi, ri, si)\n    }\n\n    public lerp(b: Hex, t: number): Hex {\n        return new Hex(\n            this.q * (1.0 - t) + b.q * t,\n            this.r * (1.0 - t) + b.r * t,\n            this.s * (1.0 - t) + b.s * t,\n        )\n    }\n\n    public linedraw(b: Hex): Hex[] {\n        const N = this.distance(b)\n        const a_nudge: Hex = new Hex(this.q + 1e-06, this.r + 1e-06, this.s - 2e-06)\n        const b_nudge: Hex = new Hex(b.q + 1e-06, b.r + 1e-06, b.s - 2e-06)\n        const results: Hex[] = []\n        const step = 1.0 / Math.max(N, 1)\n\n        for (let i = 0; i <= N; i++) {\n            results.push(a_nudge.lerp(b_nudge, step * i).round())\n        }\n        return results\n    }\n\n}\n","import { Orientation } from './Orientation'\nimport { Point } from './Point'\nimport { Hex } from './Hex'\n\nexport class Layout {\n\n    constructor(\n        public orientation: Orientation,\n        public size: Point,\n        public origin: Point,\n    ) {\n        // console.log('Layout:::constructor')\n    }\n\n    public static pointy: Orientation = new Orientation(\n        Math.sqrt(3.0),\n        Math.sqrt(3.0) / 2.0,\n        0.0,\n        3.0 / 2.0,\n        Math.sqrt(3.0) / 3.0,\n        -1.0 / 3.0,\n        0.0,\n        2.0 / 3.0,\n        0.5,\n    )\n\n    public static flat: Orientation = new Orientation(\n        3.0 / 2.0,\n        0.0,\n        Math.sqrt(3.0) / 2.0,\n        Math.sqrt(3.0),\n        2.0 / 3.0,\n        0.0,\n        -1.0 / 3.0,\n        Math.sqrt(3.0) / 3.0,\n        0.0,\n    )\n\n    public hexToPixel(h: Hex): Point {\n        const M = this.orientation\n        const size = this.size\n        const origin = this.origin\n        const x = (M.f0 * h.q + M.f1 * h.r) * size.x\n        const y = (M.f2 * h.q + M.f3 * h.r) * size.y\n        return new Point(x + origin.x, y + origin.y)\n    }\n\n    public pixelToHex(p: Point): Hex {\n        const M = this.orientation\n        const size: Point = this.size\n        const origin: Point = this.origin\n        const pt: Point = new Point((p.x - origin.x) / size.x, (p.y - origin.y) / size.y)\n        const q: number = M.b0 * pt.x + M.b1 * pt.y\n        const r: number = M.b2 * pt.x + M.b3 * pt.y\n        return new Hex(q, r, -q - r)\n    }\n\n    public hexCornerOffset(corner: number): Point {\n        const M = this.orientation\n        const size = this.size\n        const angle = 2.0 * Math.PI * (M.start_angle - corner) / 6.0\n        return new Point(\n            size.x * Math.cos(angle),\n            size.y * Math.sin(angle),\n        )\n    }\n\n    public polygonCorners(h: Hex): Point[] {\n        const corners: Point[] = []\n        const center: Point = this.hexToPixel(h)\n        for (let i = 0; i < 6; i++) {\n            const offset: Point = this.hexCornerOffset(i)\n            corners.push(new Point(center.x + offset.x, center.y + offset.y))\n        }\n        return corners\n    }\n\n}\n","import { TileId } from \"./TileId\"\nimport { BgImageIds } from \"./BgImageIds\"\nimport { keys } from \"../../../helpers/keys\"\nimport { HexType } from \"../../../types\"\n\ntype Dictionary<K extends string, T> = { [P in K]?: T }\n\nexport const tilesMap: Dictionary<TileId, BgImageIds | BgImageIds[]> = {\n    \"-6,0\": [\"center-1-1\", \"center-1-2\"],\n    \"6,0\": [\"center-2-1\", \"center-2-2\"],\n    \"6,-11\": \"player-2-4\",\n    \"-6,11\": \"player-2-3\",\n    \"5,-11\": \"player-1-3\",\n    \"-5,11\": \"player-1-4\",\n}\n\n// Player1\nfor (let i = -5, j = -1; i <= 4; i++, j--) {\n    tilesMap[`${i},${j}` as TileId] = \"player-1-start\"\n    tilesMap[`${i * -1},${j * -1}` as TileId] = \"player-1-end\"\n}\n\n// Player2\nfor (let i = 1; i <= 10; i++) {\n    tilesMap[`-6,${i}` as TileId] = \"player-2-start\"\n    tilesMap[`6,${i * -1}` as TileId] = \"player-2-end\"\n}\n\nexport const tilesMapKeys = keys(tilesMap)\n\nexport const players: [\n    name: HexType.p1 | HexType.p2,\n    start: Set<TileId>,\n    end: Set<TileId>\n][] = [\n    [HexType.p1, new Set<TileId>(), new Set<TileId>()],\n    [HexType.p2, new Set<TileId>(), new Set<TileId>()],\n]\n\nkeys(tilesMap).forEach((tileId) => {\n    switch (tilesMap[tileId]) {\n        case \"player-1-start\":\n            players[0][1].add(tileId)\n            break\n        case \"player-1-end\":\n            players[0][2].add(tileId)\n            break\n        case \"player-2-start\":\n            players[1][1].add(tileId)\n            break\n        case \"player-2-end\":\n            players[1][2].add(tileId)\n            break\n    }\n})\n","export const debounce = function (func: any, wait: any) {\n    let timeout: any\n\n    return function (...args: any[]) {\n        // @ts-ignore\n        const context = this\n        const later = function () {\n            timeout = null\n            func.apply(context, args)\n        }\n\n        clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n    }\n}\n","export const keys = Object.keys as <T extends object>(obj: T) => Array<keyof T>\n","import { HexType, Tiles } from \"../../../types\"\nimport { tilesMapKeys } from \"../../../jsx/Game/Tile/tilesMap\"\nimport { QR } from \"../defaults/tiles\"\nimport { TileId } from \"../../../jsx/Game/Tile/TileId\"\nimport { Hex } from \"../../../jsx/Hexagons/Hex\"\n\nexport const generateTiles = (data: QR[]): Tiles => {\n    const result: Tiles = {} as Tiles\n\n    data.forEach((item) => {\n        const id = item.join(\",\") as TileId\n        result[id] = {\n            hex: { q: item[0], r: item[1] } as Hex,\n            type: tilesMapKeys.includes(id) ? HexType.border : HexType.emptyCell,\n        }\n    })\n\n    return result\n}\n","import { Tiles } from \"../../../types\"\nimport { toHex } from \"./toHex\"\n\nexport const objectToHex = (tilesObject: Tiles): Tiles => {\n    const tiles: Tiles = {} as Tiles\n\n    Object.values(tilesObject).forEach(({ hex: _hex, type }) => {\n        const hex = toHex(_hex.q, _hex.r)\n        tiles[hex.id] = { hex, type }\n    })\n\n    return tiles\n}\n","import { Hex } from \"../../../jsx/Hexagons/Hex\"\n\nexport const toHex = (q: number, r: number) => new Hex(q, r, (q + r) * -1)\n","import { Store } from \"../Store\"\nimport { HexType, OrientationType, Tiles } from \"../../../types\"\nimport { Layout } from \"../../../jsx/Hexagons/Layout\"\nimport { generateTiles} from \"./generateTiles\"\nimport { tiles } from \"../defaults/tiles\"\nimport { PlayerMove } from \"./onClick\"\nimport { objectToHex } from \"./objectToHex\"\n\nexport const init = (store: Store) => {\n    store.orientation = Layout[store.storage.getOrApply<OrientationType>(\"orientation\", () => \"flat\")]\n\n    store.playerMove = store.storage.getOrApply<PlayerMove>(\"playerMove\", () => HexType.p1)\n\n    store.tiles = objectToHex(store.storage.getOrApply<Tiles>(\"tiles\", () => generateTiles(tiles(store.size))))\n}\n","export type QR = [q: number, r: number]\n\nexport const tiles = (_size: 11): QR[] => {\n    const size = _size + 2\n\n    const result: QR[] = []\n\n\n    const fromTo = (size - 1) / 2\n    let a = 0\n\n    for (let i = (fromTo * -1); i <= fromTo; i++) {\n        for (let j = a; j <= (size - 1) + a; j++) {\n            result.push([i, j])\n        }\n        a--\n    }\n\n    const qs = result.map(([q]) => q)\n    const rs = result.map(([, r]) => r)\n    const max = [Math.max(...qs), Math.min(...rs)].join(\",\")\n    const min = [Math.min(...qs), Math.max(...rs)].join(\",\")\n\n    return result.filter((item) => {\n        const id = item.join(\",\")\n        return id !== max && id !== min\n    })\n}\n","import { Store } from \"../Store\"\nimport { runInAction } from \"mobx\"\nimport { Layout } from \"../../../jsx/Hexagons/Layout\"\nimport { Point } from \"../../../jsx/Hexagons/Point\"\n\nexport const recalc = (store: Store): void => {\n    const isPointy = store.isPointy\n    const widthSize = isPointy ? store.smallSide : store.largeSide\n    const heightSize = isPointy ? store.largeSide : store.smallSide\n\n    runInAction(() => {\n        store.R = Math.min(\n            store.width / widthSize,\n            store.height / (heightSize * 2)\n        )\n\n        store.layout = new Layout(\n            store.orientation,\n            new Point(store.R, store.R),\n            new Point(\n                store.width / 2,\n                store.R * heightSize,\n            ),\n        )\n    })\n}\n","import { recalc } from \"./recalc\"\nimport { Store } from \"../Store\"\nimport { runInAction } from \"mobx\"\n\ntype OnWindowResize = (store: Store) => () => void\n\nexport const onWindowResize: OnWindowResize = (store) => () => {\n    const [width, height] = store.elSizes\n    if (store.width !== width || store.height !== height) {\n        runInAction(() => {\n            store.width = width\n            store.height = height\n        })\n        recalc(store)\n    }\n}\n","import { HexType, Tiles } from \"../../../types\"\nimport { TileId } from \"../../../jsx/Game/Tile/TileId\"\nimport { players } from \"../../../jsx/Game/Tile/tilesMap\"\n\nexport class PathFinder {\n\n    private allDirections = [...Array(6).keys()]\n\n    private cache = new Set<TileId>()\n\n    constructor(\n        private tiles: Tiles,\n        private endGameAction: (name: HexType.p1 | HexType.p2) => void,\n    ) {\n        for (const [name, start, end] of players) {\n            for (const tileId of start) {\n                this.run(tileId, end, name)\n            }\n        }\n    }\n\n    private run(tileId: TileId, end: Set<TileId>, name: HexType.p1 | HexType.p2) {\n        for (const direction of this.allDirections) {\n            const neighbor = this.tiles[this.tiles[tileId].hex.neighbor(direction).id]\n            if (neighbor) {\n                const id = neighbor.hex.id\n                if (neighbor.type === HexType.border && end.has(id)) {\n                    this.endGameAction(name)\n                    break\n                }\n                if (neighbor.type === name && !this.cache.has(id)) {\n                    this.cache.add(id)\n                    this.run(id, end, name)\n                }\n            }\n        }\n    }\n}\n","import { Store } from \"../Store\"\nimport { HexType } from \"../../../types\"\nimport { runInAction } from \"mobx\"\n\nexport const endGame = (store: Store) => (name: HexType.p1 | HexType.p2) => {\n    runInAction(() => {\n        store.endGame = { name }\n    })\n}\n","import { makeAutoObservable } from \"mobx\"\nimport { Layout } from \"../../jsx/Hexagons/Layout\"\nimport { Point } from \"../../jsx/Hexagons/Point\"\nimport { HexType, Keys, OrientationType, Tiles, Values } from \"../../types\"\nimport { debounce } from \"../../helpers/debounce\"\nimport { LocalStorageMgmnt } from \"../LocalStorageMgmnt\"\nimport { Orientation } from \"../../jsx/Hexagons/Orientation\"\nimport { init } from \"./applyers/init\"\nimport { onWindowResize } from \"./applyers/onWindowResize\"\nimport { TileId } from \"../../jsx/Game/Tile/TileId\"\nimport { PlayerMove } from \"./applyers/onClick\"\nimport { PathFinder } from \"./applyers/PathFinder\"\nimport { endGame } from \"./applyers/endGame\"\n\nexport class Store {\n\n    readonly ratio = 0.8660254\n\n    readonly largeSide = 18\n\n    readonly smallSide = 18 * this.ratio\n\n    readonly size: 11 = 11\n\n    width = 0\n\n    height = 0\n\n    R = 0\n\n    preSit = false\n\n    hoveredId: TileId | null = null\n\n    endGame: null | { name: HexType.p1 | HexType.p2 } = null\n\n    constructor() {\n        init(this)\n        makeAutoObservable<Store,\n            | \"ratio\"\n            | \"largeSide\"\n            | \"smallSide\"\n            | \"storage\">(this, {\n            ratio: false,\n            largeSide: false,\n            smallSide: false,\n            storage: false,\n        })\n\n        if (process.env.NODE_ENV === \"development\") {\n            // new (require(\"./__DEV__appendStyles\").__DEV__appendStyles)(this.smallSide, this.largeSide, this.ratio, this.tiles)\n        }\n\n        setTimeout(() => {\n            new PathFinder(this.tiles, endGame(this))\n        }, 0)\n    }\n\n    storage = new LocalStorageMgmnt<Keys, Values>(\"hex-game\")\n\n    private _tiles: Tiles = {} as Tiles\n\n    get tiles(): Tiles {\n        return this._tiles\n    }\n\n    set tiles(tiles: Tiles) {\n        this._tiles = tiles\n        this.storage.set(\"tiles\", this.tiles)\n    }\n\n    layout: Layout = new Layout(this.orientation, new Point(0, 0), new Point(0, 0))\n\n    private _playerMove: PlayerMove = HexType.p1\n\n    get playerMove() {\n        return this._playerMove\n    }\n\n    set playerMove(playerMove) {\n        this._playerMove = playerMove\n        this.storage.set(\"playerMove\", this.playerMove)\n    }\n\n    dispose = (): void => {\n        try {\n            window.removeEventListener(\"resize\", this.debounce)\n            this.storage.destroy()\n            init(this)\n            window.location.reload()\n        } catch (e) {\n            console.warn(\"%cTODO\", \"font-size:50px;\", e)\n        }\n    }\n\n    private _arenaElement: HTMLDivElement | null = null\n\n    get arenaElement() {\n        return this._arenaElement\n    }\n\n    set arenaElement(el) {\n        this._arenaElement = el\n        onWindowResize(this)()\n        window.addEventListener(\"resize\", this.debounce, false)\n    }\n\n    get elSizes(): [number, number] {\n        const arenaElement = this.arenaElement\n\n        if (arenaElement) {\n            return [arenaElement.offsetWidth, arenaElement.offsetHeight]\n        }\n\n        return [0, 0]\n    }\n\n    debounce = debounce(onWindowResize(this), 400)\n\n    private _orientation: Orientation = Layout.flat\n\n    get orientation() {\n        return this._orientation\n    }\n\n    set orientation(orientation) {\n        this._orientation = orientation\n        this.storage.set(\"orientation\", this.orientationType)\n    }\n\n    get orientationType(): OrientationType {\n        return this.isPointy ? \"pointy\" : \"flat\"\n    }\n\n    get isPointy() {\n        return this.orientation.start_angle === 0.5\n    }\n}\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport { createContext, FC, useContext, useEffect } from \"react\"\nimport { Store } from \"./Store\"\n\nconst HexContext = createContext<Store | null>(null)\n\nexport const StoreProvider: FC<{ store: Store }> = ({ children, store }) => {\n    useEffect(() => store.dispose, [])\n    return (\n        <HexContext.Provider value={store}>\n            {children}\n        </HexContext.Provider>\n    )\n}\n\nexport const useStore = (): Store => {\n    const store = useContext(HexContext)\n    if (!store) {\n        throw new Error(\"hook must be used within a Provider\")\n    }\n    return store\n}\n","import { FC } from \"react\"\nimport { observer } from \"mobx-react\"\nimport styles from \"./MenuButton.module.css\"\nimport { useUIStore } from \"../../../Storage/UIStore/UIStoreProvider\"\n\nexport const MenuButton: FC = observer(() => {\n    const store = useUIStore()\n\n    return (\n        <button\n            className={store.drawer ? styles.closeMenu : styles.openMenu}\n            onClick={store.toggleDrawer}\n        />\n    )\n})\n","import { FC } from \"react\"\nimport styles from \"./Footer.module.css\"\n\nexport const Footer: FC = () => (\n    <footer className={styles.footer}>\n        bonez &copy; 2020 - {new Date().getFullYear()}\n    </footer>\n)\n","import { i18nKeys } from \"./i18nKeys\"\nimport { rus } from \"./rus\"\nimport { eng } from \"./eng\"\n// import { FC } from \"react\"\n\nexport type Language = \"rus\" | \"eng\"\n\nconst languageDefaultState: Language = \"rus\"\n\ntype I18n = (key: i18nKeys | string) => string\n\nconst commonSettings = JSON.parse(localStorage.getItem(\"ui\") || JSON.stringify({\n    language: languageDefaultState,\n}))\n\nconst lang: Language = commonSettings.language || languageDefaultState\n\nexport type LanguageMap = Record<i18nKeys, string>\n\nconst languagesMap: Record<Language, LanguageMap> = {\n    rus,\n    eng,\n}\n\nexport const i18n: I18n = (key) => {\n    const res = languagesMap[lang][key as i18nKeys]\n\n    if (res === undefined) {\n        return `~${key}~`\n    }\n\n    return res\n}\n\n// interface I18nProps {\n//     children: i18nKeys | string\n// }\n//\n// export const I18n: FC<I18nProps> = ({ children }) => (\n//     <>{i18n(children)}</>\n// )\n","import { LanguageMap } from \"./i18n\"\n\nexport const rus: LanguageMap = {\n    yacht: \"Яхта\",\n    indigo: \"Индиго\",\n    hex: \"Гекс\",\n    systemTheme: \"Из системы\",\n\n    \"button.startNewGame\": \"Начать новую игру\",\n    \"button.restartGame\": \"Начать заново\",\n    \"button.startGame\": \"Начать игру\",\n    \"button.cancel\": \"Отмена\",\n    \"button.addPlayer\": \"Добавить игрока\",\n    \"button.restart\": \"Начать заново\",\n    \"button.rotate\": \"Повернуть\",\n    \"button.light\": \"Светлая\",\n    \"button.dark\": \"Темная\",\n    \"button.system\": \"Как в системе\",\n    \"button.apply\": \"Применить\",\n\n    currentGameWillBeLost: \"Текущая игра будет утеряна.\",\n\n    \"text.placeChip\": \"Поставить фишку\",\n    \"text.rotateField\": \"Повернуть поле\",\n    \"text.showDrawer\": \"Показать меню\",\n    \"text.wins\": \"Выиграл!\",\n    \"text.gameOver\": \"Игра окончена\",\n}\n","import { LanguageMap } from \"./i18n\"\n\nexport const eng: LanguageMap = {\n    yacht: \"Yacht\",\n    indigo: \"Indigo\",\n    hex: \"Hex\",\n    systemTheme: \"System theme\",\n\n    \"button.startNewGame\": \"Start new game\",\n    \"button.restartGame\": \"Restart game\",\n    \"button.cancel\": \"Cancel\",\n    \"button.startGame\": \"Start game\",\n    \"button.addPlayer\": \"Add player\",\n    \"button.restart\": \"Restart\",\n    \"button.rotate\": \"Rotate\",\n    \"button.light\": \"Light\",\n    \"button.dark\": \"Dark\",\n    \"button.system\": \"System\",\n    \"button.apply\": \"Apply\",\n\n    currentGameWillBeLost: \"Current game will be lost.\",\n\n    \"text.placeChip\": \"Place chip\",\n    \"text.rotateField\": \"Rotate field\",\n    \"text.showDrawer\": \"Show drawer\",\n    \"text.wins\": \"Wins!\",\n    \"text.gameOver\": \"Game Over\",\n}\n","import { FC, useCallback, useEffect, useState } from \"react\"\nimport styles from \"./GamesSwitcher.module.css\"\nimport cx from \"classnames\"\nimport { i18n } from \"../../../../i18n/i18n\"\n\nexport const GamesSwitcher: FC = () => {\n    const [visible, setVisible] = useState(false)\n    const open = useCallback(() => {\n        setVisible(true)\n    }, [])\n    const close = useCallback(() => {\n        setVisible(false)\n    }, [])\n\n    useEffect(() => {\n        if (visible) {\n            document.addEventListener(\"click\", close)\n        } else {\n            document.removeEventListener(\"click\", close)\n        }\n    }, [visible, close])\n\n    return (\n        <div className={styles.root}>\n            <h1 className={styles.heading} onClick={open}>\n                {i18n(\"hex\")}\n            </h1>\n            <ul className={cx(styles.list, { [styles.visible]: visible })}>\n                <li className={styles.selected}>{i18n(\"hex\")}</li>\n                <li onClick={() => {\n                    // @ts-ignore\n                    window.location = \"https://bnz.github.io/indigo/\"\n                }}>{i18n(\"indigo\")}</li>\n                <li onClick={() => {\n                    // @ts-ignore\n                    window.location = \"https://bnz.github.io/yacht/\"\n                }}>{i18n(\"yacht\")}</li>\n            </ul>\n        </div>\n    )\n}\n","import { FC } from \"react\"\nimport { observer } from \"mobx-react\"\nimport { useUIStore } from \"../../../../Storage/UIStore/UIStoreProvider\"\nimport styles from \"./LanguageSwitcher.module.css\"\n\nexport const LanguageSwitcher: FC = observer(() => {\n    const store = useUIStore()\n    const lang = store.language\n\n    return (\n        <div className={styles.root}>\n            <button disabled={lang === \"rus\"} onClick={store.setLanguage(\"rus\")}>\n                рус\n            </button>\n            <button disabled={lang === \"eng\"} onClick={store.setLanguage(\"eng\")}>\n                eng\n            </button>\n        </div>\n    )\n})\n","import { FC } from \"react\"\nimport { observer } from \"mobx-react\"\nimport styles from \"./ThemeSwitcher.module.css\"\nimport { useUIStore } from \"../../../../Storage/UIStore/UIStoreProvider\"\nimport cx from \"classnames\"\nimport { Theme } from \"../../../../Storage/UIStore/UIStore\"\n\nexport const ThemeSwitcher: FC = observer(() => {\n    const store = useUIStore()\n    const theme = store.theme\n    const fn = (th: Theme) => cx(styles[th], { [styles.selected]: theme === th })\n\n    return (\n        <div className={styles.wrapper}>\n            <input\n                type=\"radio\"\n                className={fn(\"light\")}\n                onClick={store.changeTheme(\"light\")}\n            />\n            <input\n                type=\"radio\"\n                className={fn(\"dark\")}\n                onClick={store.changeTheme(\"dark\")}\n            />\n            <input\n                type=\"radio\"\n                className={fn(\"system\")}\n                onClick={store.changeTheme(\"system\")}\n            />\n            {/*\n            <label className={styles.checkboxLabel}>\n                <h5>{i18n(\"systemTheme\")}</h5>\n                <input\n                    type=\"checkbox\"\n                    className={styles.checkbox}\n                    checked={themeSystem}\n                    onChange={store.useSystemTheme}\n                />\n            </label>\n            */}\n        </div>\n    )\n})\n","import { FC, useEffect, useRef } from \"react\"\nimport { createPortal } from \"react-dom\"\n\nconst root = document.getElementById(\"root\")\n\nexport const Modal: FC = ({ children }) => {\n    const el = useRef(document.createElement(\"div\"))\n\n    useEffect(() => {\n        const div = el.current\n        root?.appendChild(div)\n\n        return () => {\n            root?.removeChild(div)\n        }\n    }, [])\n\n    return createPortal(children, el.current)\n}\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport { FC, useEffect } from \"react\"\nimport { KeyCodes } from \"./KeyCodes\"\n\ntype Dictionary<K extends string, T> = { [P in K]?: T }\n\ninterface KeyboardActionsProps {\n    actions: Dictionary<KeyCodes, () => void>\n}\n\nexport const KeyboardActions: FC<KeyboardActionsProps> = ({ actions }) => {\n    useEffect(() => {\n        const fn = (e: KeyboardEvent): void => {\n            actions[e.code as KeyCodes]?.()\n        }\n        window.addEventListener(\"keyup\", fn, true)\n\n        return () => {\n            window.removeEventListener(\"keyup\", fn, true)\n        }\n    }, [])\n\n    return null\n}\n","import { FC, ReactNode } from \"react\"\nimport styles from \"./Dialog.module.css\"\nimport { Modal } from \"../Modal/Modal\"\nimport { KeyboardActions } from \"../KeyboardActions/KeyboardActions\"\n\ninterface DialogProps {\n    heading?: string\n    close?(): void\n    footer?: ReactNode\n}\n\nexport const Dialog: FC<DialogProps> = ({\n    heading,\n    close,\n    children,\n    footer,\n}) => (\n    <Modal>\n        <KeyboardActions actions={{ Escape: close }} />\n        <div className={styles.backdrop} onClick={close} />\n        <div className={styles.root}>\n            {heading !== undefined && (\n                <h2 className={styles.header}>\n                    {heading}\n                    {close && (\n                        <button className={styles.closeButton} onClick={close} />\n                    )}\n                </h2>\n            )}\n            <section className={styles.content}>\n                {children}\n            </section>\n            {footer !== undefined && (\n                <footer className={styles.footer}>\n                    {footer}\n                </footer>\n            )}\n        </div>\n    </Modal>\n)\n","import { FC } from \"react\"\nimport { observer } from \"mobx-react\"\nimport buttonStyles from \"../../../Components/Button/Button.module.css\"\nimport { i18n } from \"../../../../i18n/i18n\"\nimport { useUIStore } from \"../../../../Storage/UIStore/UIStoreProvider\"\n\nexport const RestartButton: FC = observer(() => (\n    <button className={buttonStyles.main} onClick={useUIStore().restartGame}>\n        {i18n(\"button.restart\")}\n    </button>\n))\n","import { FC, useCallback, useState } from \"react\"\nimport { i18n } from \"../../../../i18n/i18n\"\nimport buttonStyles from \"../../../Components/Button/Button.module.css\"\nimport { Dialog } from \"../../../Components/Dialog/Dialog\"\nimport { RestartButton } from \"./RestartButton\"\n\nexport const RestartGame: FC = () => {\n    const [dialogVisible, setDialogVisible] = useState(false)\n    const close = useCallback(() => {\n        setDialogVisible(false)\n    }, [])\n\n    return (\n        <>\n            <button className={buttonStyles.restart} onClick={() => {\n                setDialogVisible(true)\n            }}>\n                {i18n(\"button.restart\")}\n            </button>\n            {dialogVisible && (\n                <Dialog\n                    heading={`${i18n(\"button.restartGame\")}?`}\n                    close={close}\n                    footer={\n                        <>\n                            <button className={buttonStyles.text} onClick={close}>\n                                {i18n(\"button.cancel\")}\n                            </button>\n                            <RestartButton />\n                        </>\n                    }\n                >\n                    <div style={{ textAlign: \"center\" }}>\n                        {i18n(\"currentGameWillBeLost\")}\n                    </div>\n                </Dialog>\n            )}\n        </>\n    )\n}\n\n","import { runInAction } from \"mobx\"\nimport { Layout } from \"../../../jsx/Hexagons/Layout\"\nimport { recalc } from \"./recalc\"\nimport { Store } from \"../Store\"\n\nexport const changeOrientation = (store: Store, orientation: \"flat\" | \"pointy\") => () => {\n    runInAction(() => {\n        store.orientation = orientation === \"flat\" ? Layout.flat : Layout.pointy\n        const [width, height] = store.elSizes\n        store.width = width\n        store.height = height\n        recalc(store)\n    })\n}\n","import { FC } from \"react\"\nimport styles from \"./RotateLayout.module.css\"\nimport { observer } from \"mobx-react\"\nimport { useStore } from \"../../../../Storage/Store/StoreProvider\"\nimport { changeOrientation } from \"../../../../Storage/Store/applyers/changeOrientation\"\n\nexport const RotateLayout: FC = observer(() => {\n    const store = useStore()\n    const isPointy = store.isPointy\n\n    return (\n        <div className={styles.wrap}>\n            <button\n                disabled={!isPointy}\n                className={styles.flat}\n                onClick={changeOrientation(store, \"flat\")}\n            />\n            <button\n                disabled={isPointy}\n                className={styles.pointy}\n                onClick={changeOrientation(store, \"pointy\")}\n            />\n        </div>\n    )\n})\n","import { FC } from \"react\"\nimport { i18n } from \"../../../../i18n/i18n\"\nimport { i18nKeys } from \"../../../../i18n/i18nKeys\"\nimport { keys } from \"../../../../helpers/keys\"\nimport styles from \"./KeyMapHints.module.css\"\n\nconst map: Record<string, i18nKeys | string> = {\n    Enter: \"text.placeChip\",\n    R: \"text.rotateField\",\n    D: \"text.showDrawer\",\n}\n\nexport const KeyMapHints: FC = () => (\n    <ul className={styles.root}>\n        {keys(map).map((key) => (\n            <li key={key}>\n                <code>{key}</code> - {i18n(map[key])}\n            </li>\n        ))}\n    </ul>\n)\n","import { FC } from \"react\"\nimport cx from \"classnames\"\nimport { observer } from \"mobx-react\"\nimport styles from \"./Drawer.module.css\"\nimport { useUIStore } from \"../../../Storage/UIStore/UIStoreProvider\"\nimport { UIPhase } from \"../../../types\"\nimport { Footer } from \"./Footer/Footer\"\nimport { GamesSwitcher } from \"./GamesSwitcher/GamesSwitcher\"\nimport { LanguageSwitcher } from \"./LanguageSwitcher/LanguageSwitcher\"\nimport { ThemeSwitcher } from \"./ThemeSwitcher/ThemeSwitcher\"\nimport { RestartGame } from \"./RestartGame/RestartGame\"\nimport { RotateLayout } from \"./RotateLayout/RotateLayout\"\nimport { KeyMapHints } from \"./KeyMapHints/KeyMapHints\"\n\nexport const Drawer: FC = observer(() => {\n    const store = useUIStore()\n\n    return (\n        <div className={cx({ [styles.hidden]: !store.drawer })}>\n            <div className={styles.backdrop} onClick={store.toggleDrawer} />\n            <div className={styles.drawer}>\n                <GamesSwitcher />\n                <div className={styles.content}>\n                    <LanguageSwitcher />\n                    <ThemeSwitcher />\n                    {store.phase === UIPhase.GAME && (\n                        <>\n                            <div className={styles.actions}>\n                                <RestartGame />\n                                <RotateLayout />\n                                <KeyMapHints />\n                            </div>\n                        </>\n                    )}\n                </div>\n                <Footer />\n            </div>\n        </div>\n    )\n})\n","import { FC } from 'react'\nimport buttonStyles from \"../../Components/Button/Button.module.css\"\nimport { i18n } from \"../../../i18n/i18n\"\nimport { useUIStore } from \"../../../Storage/UIStore/UIStoreProvider\"\n\nexport const StartButton: FC = () => (\n    <button className={buttonStyles.main} onClick={useUIStore().startGame}>\n        {i18n('button.startNewGame')}\n    </button>\n)\n","import { MouseEvent } from \"react\"\nimport { runInAction } from \"mobx\"\nimport { HexType } from \"../../../types\"\nimport { Store } from \"../Store\"\n\ntype OnMouseMove = (store: Store) => (e: MouseEvent<HTMLDivElement>) => void\n\nexport const onMouseMove: OnMouseMove = (store) => (e) => {\n    if (store.preSit || store.endGame) {\n        return\n    }\n\n    const rect = e.currentTarget.getBoundingClientRect() as DOMRect\n    const hex = store.layout.pixelToHex({ x: e.pageX - rect.x, y: e.pageY - rect.y }).round()\n\n    runInAction(() => {\n        if (store.tiles[hex.id] && store.tiles[hex.id].type === HexType.emptyCell) {\n            store.hoveredId = hex.id\n        } else {\n            store.hoveredId = null\n        }\n    })\n}\n","import { Store } from \"../Store\"\nimport { runInAction } from \"mobx\"\nimport { HexType } from \"../../../types\"\nimport { PathFinder } from \"./PathFinder\"\nimport { endGame } from \"./endGame\"\n\nexport type PlayerMove = HexType.p1 | HexType.p2\n\nexport const onClick = (store: Store) => (): void => {\n    runInAction(() => {\n        if (store.hoveredId !== null && store.tiles[store.hoveredId].type !== store.playerMove && !store.endGame) {\n            store.tiles[store.hoveredId].type = store.playerMove\n            store.storage.set(\"tiles\", store.tiles)\n            store.playerMove = store.playerMove === HexType.p1 ? HexType.p2 : HexType.p1\n            new PathFinder(store.tiles, endGame(store))\n        }\n    })\n}\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport { FC, useEffect, useMemo, useRef } from \"react\"\nimport { observer } from \"mobx-react\"\nimport { useStore } from \"../../../Storage/Store/StoreProvider\"\nimport { onMouseMove } from \"../../../Storage/Store/applyers/onMouseMove\"\n// import { applySit } from \"../../../Storage/Store/applyers/applySit\"\nimport { onClick } from \"../../../Storage/Store/applyers/onClick\"\nimport \"./Arena.css\"\n\nexport const ArenaWrapper: FC = observer(({ children }) => {\n    const store = useStore()\n    const arenaRef = useRef<HTMLDivElement | null>(null)\n\n    useEffect(() => {\n        store.arenaElement = arenaRef.current\n    }, [store.arenaElement])\n\n    return (\n        <div\n            ref={arenaRef}\n            className={store.orientationType}\n            {...useMemo(() => {\n                if (store.arenaElement === null) {\n                    return {}\n                }\n\n                return {\n                    style:{ [\"--R\" as string]: `${store.R}px` },\n                    onClick: onClick(store),\n                    onMouseMove: onMouseMove(store),\n                    // onDoubleClick: applySit(store),\n                    children,\n                }\n            }, [\n                store.arenaElement,\n                store.R,\n            ])}\n        />\n    )\n})\n","import { FC } from \"react\"\nimport { observer } from \"mobx-react\"\nimport { TileId } from \"./TileId\"\nimport { HexType } from \"../../../types\"\n\nexport interface Data<T> {\n    data: T\n}\n\nexport interface TileProps {\n    qr: TileId\n    p?: HexType.p1 | HexType.p2\n    border?: boolean\n}\n\nexport const Tile: FC<Data<TileProps>> = observer(({ data }) => (\n    <div\n        data-qr={data.qr}\n        {...(data.p ? { className: `p${data.p}` } : {})}\n        {...(data.border ? { \"data-b\": \"\" } : {})}\n    />\n))\n","import { FC } from \"react\"\nimport { useStore } from \"../../../Storage/Store/StoreProvider\"\nimport { Tile } from \"./Tile\"\nimport { makeAutoObservable } from \"mobx\"\nimport { HexType } from \"../../../types\"\nimport { TileId } from \"./TileId\"\nimport \"./Tile.css\"\nimport \"./Tiles.css\"\n\nexport const Tiles: FC = () => (\n    <>\n        {Object.entries(useStore().tiles).map((entry, i) => (\n            <Tile key={i} data={makeAutoObservable({\n                get qr() {\n                    return [entry[1].hex.q, entry[1].hex.r].join(\",\") as TileId\n                },\n                get border() {\n                    return entry[1].type === HexType.border\n                },\n                get p() {\n                    switch (entry[1].type) {\n                        case HexType.p1:\n                            return HexType.p1\n                        case HexType.p2:\n                            return HexType.p2\n                        default:\n                            return undefined\n                    }\n                },\n            })} />\n        ))}\n    </>\n)\n","import { FC, useEffect, useRef } from \"react\"\nimport { observer } from \"mobx-react\"\nimport { useStore } from \"../../../Storage/Store/StoreProvider\"\nimport { TileId } from \"./TileId\"\n\nconst usePrevious = <T, >(value: T) => {\n    const ref = useRef<T>()\n\n    useEffect(() => {\n        ref.current = value\n    }, [value])\n\n    return ref.current\n}\n\nexport const TileHovered: FC = observer(() => {\n    const store = useStore()\n    const hoveredId = store.hoveredId\n    const prev = usePrevious<TileId | null>(hoveredId) // TODO ? || \"0,0\" <-- initial position in center?\n    const move = store.playerMove\n\n    return (\n        <div\n            {...{ [`data-hovered-player-${move}`]: \"\" }}\n            data-qr={hoveredId === null ? prev : hoveredId}\n        />\n    )\n})\n","import { Store } from \"../Store\"\nimport { changeOrientation } from \"./changeOrientation\"\n\nexport const toggleOrientation = (store: Store) => (): void => {\n    changeOrientation(store, store.isPointy ? \"flat\" : \"pointy\")()\n}\n","import { FC } from \"react\"\nimport { KeyboardActions } from \"../../Components/KeyboardActions/KeyboardActions\"\nimport { useStore } from \"../../../Storage/Store/StoreProvider\"\nimport { toggleOrientation } from \"../../../Storage/Store/applyers/toggleOrientation\"\nimport { useUIStore } from \"../../../Storage/UIStore/UIStoreProvider\"\nimport { onClick } from \"../../../Storage/Store/applyers/onClick\"\n\nexport const ArenaKeyboardActions: FC = () => {\n    const store = useStore()\n    const toggleDrawer = useUIStore().toggleDrawer\n\n    return (\n        <KeyboardActions actions={{\n            KeyR: toggleOrientation(store),\n            KeyD: toggleDrawer,\n            Enter: onClick(store),\n        }} />\n    )\n}\n","import { FC, useState } from \"react\"\nimport { observer } from \"mobx-react\"\nimport { useStore } from \"../../../Storage/Store/StoreProvider\"\nimport { Dialog } from \"../../Components/Dialog/Dialog\"\nimport { i18n } from \"../../../i18n/i18n\"\nimport { RestartButton } from \"../../Layout/Drawer/RestartGame/RestartButton\"\nimport styles from \"./EndGame.module.css\"\nimport cx from \"classnames\"\n\nexport const EndGame: FC = observer(() => {\n    const store = useStore()\n    const [open, setOpen] = useState<boolean>(true)\n\n    if (store.endGame === null || !open) {\n        return null\n    }\n\n    return (\n        <Dialog\n            heading={i18n(\"text.gameOver\")}\n            footer={<RestartButton />}\n            close={() => setOpen(false)}\n        >\n            <h3 className={styles.h3}>\n                {i18n(\"text.wins\").replace(\n                    \"###\",\n                    `${store.endGame.name}`,\n                )}\n            </h3>\n            <div data-qr className={cx(`p${store.endGame.name}`, styles.hex)} />\n        </Dialog>\n    )\n})\n","import { FC } from \"react\"\nimport { ArenaWrapper } from \"./ArenaWrapper\"\nimport { Tiles } from \"../Tile/Tiles\"\nimport { TileHovered } from \"../Tile/TileHovered\"\nimport { ArenaKeyboardActions } from \"./ArenaKeyboardActions\"\nimport { EndGame } from \"../EndGame/EndGame\"\n\nexport const Arena: FC = () => (\n    <ArenaWrapper>\n        <ArenaKeyboardActions />\n        <Tiles />\n        <TileHovered />\n        <EndGame />\n    </ArenaWrapper>\n)\n","import { FC } from \"react\"\nimport { useUIStore } from \"../../Storage/UIStore/UIStoreProvider\"\nimport { UIPhase } from \"../../types\"\nimport { StartButton } from \"../Rules/StartButton/StartButton\"\nimport { observer } from \"mobx-react\"\nimport { Arena } from \"./Arena/Arena\"\n\nexport const Game: FC = observer(() => {\n    switch (useUIStore().phase) {\n        case UIPhase.PRE_GAME:\n            return (\n                <>\n                    <div style={{\n                        padding: \"calc(var(--spacing) * 10)\",\n                        textAlign: \"center\",\n                    }}>\n                        <StartButton />\n                    </div>\n                </>\n            )\n        case UIPhase.GAME:\n            return (\n                <Arena />\n            )\n        default:\n            return null\n    }\n})\n","import { StrictMode } from \"react\"\nimport { render } from \"react-dom\"\nimport { UIStore } from \"./Storage/UIStore/UIStore\"\nimport { UIStoreProvider } from \"./Storage/UIStore/UIStoreProvider\"\nimport { Store } from \"./Storage/Store/Store\"\nimport { StoreProvider } from \"./Storage/Store/StoreProvider\"\nimport { MenuButton } from \"./jsx/Layout/MenuButton/MenuButton\"\nimport { Drawer } from \"./jsx/Layout/Drawer/Drawer\"\nimport { Game } from \"./jsx/Game/Game\"\nimport \"modern-css-reset\"\nimport \"@fontsource/roboto\"\nimport \"./index.css\"\nimport \"./:root.css\"\n\nconst store = new Store()\n\nrender(\n    <StrictMode>\n        <UIStoreProvider store={new UIStore(store.dispose)}>\n            <StoreProvider store={store}>\n                <Game />\n                <Drawer />\n                <MenuButton />\n            </StoreProvider>\n        </UIStoreProvider>\n    </StrictMode>,\n    document.getElementById(\"root\"),\n)\n"],"sourceRoot":""}